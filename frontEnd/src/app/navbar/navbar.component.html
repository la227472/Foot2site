<nav class="navbar">
  <div class="navbar-container">
    <div class="navbar-brand">
      <a routerLink="/accueil">RAMène-toi</a>
    </div>

    <div class="navbar-menu">
      <a routerLink="/accueil" routerLinkActive="active">Accueil</a>
      <a routerLink="/comparer" routerLinkActive="active">Comparer</a>
      <a
        *ngIf="connectionService.isAdmin()"
        routerLink="/gerer-composant"
        routerLinkActive="active"
        >Gérer Composant</a
      >
      <a
        *ngIf="connectionService.isAdmin()"
        routerLink="/users"
        routerLinkActive="active"
        >Utilisateurs</a
      >
    </div>

    <div class="navbar-icons">
      <button class="icon-btn" title="Panier"  routerLink="/panier" routerLinkActive="active">
<mat-icon>shopping_cart</mat-icon>
      </button>

      <!-- Afficher profil et déconnexion uniquement si connecté -->
      <ng-container
        *ngIf="connectionService.isAuthenticated(); else loginButton"
      >
        <div class="profile-menu-container">
          <button class="icon-btn" title="Profil" (click)="toggleProfileMenu()">
            <mat-icon>account_circle</mat-icon>
          </button>

          <!-- Menu déroulant -->
          <div class="profile-dropdown" *ngIf="isProfileMenuOpen">
            <a routerLink="/profil" (click)="closeProfileMenu()" class="dropdown-item">
              <mat-icon>person</mat-icon>
              <span>Profil</span>
            </a>
            <a routerLink="/profilconfig" (click)="closeProfileMenu()" class="dropdown-item">
              <mat-icon>settings</mat-icon>
              <span>Configuration</span>
            </a>
            <a routerLink="/commandes" (click)="closeProfileMenu()" class="dropdown-item">
              <mat-icon>receipt_long</mat-icon>
              <span>Commandes</span>
            </a>
            <div class="dropdown-divider"></div>
            <a (click)="logout()" class="dropdown-item logout-item">
              <mat-icon>logout</mat-icon>
              <span>Déconnexion</span>
            </a>
          </div>
        </div>
      </ng-container>

      <!-- Bouton de connexion si non connecté -->
      <ng-template #loginButton>
        <button
          class="icon-btn login-btn"
          routerLink="/connection"
          title="Se connecter">
          <mat-icon>login</mat-icon>
        </button>
      </ng-template>
    </div>
  </div>
</nav>
