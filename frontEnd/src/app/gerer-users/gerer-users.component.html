<div class="gerer-users-layout">
  <!-- Menu latéral gauche -->
  <aside class="sidebar">
    <nav class="sidebar-nav">
      <button class="nav-item" routerLink="/accueil">
        Mon profil
      </button>
      <button class="nav-item" routerLink="/accueil">
        Mes commandes
      </button>
      <button class="nav-item active">
        Utilisateurs
      </button>
    </nav>
  </aside>

  <!-- Contenu principal à droite -->
  <main class="main-content">
    <!-- Header avec bouton retour et titre -->
    <header class="content-header">
      <button class="back-button" (click)="goBack()">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <h1>Utilisateurs</h1>
    </header>

    <!-- Zone de contenu avec recherche et tableau -->
    <div class="content-body">
      <!-- Barre de recherche -->
      <div class="search-section">
        <label class="search-label">Nom - Prénom - e-mail</label>
        <div class="search-bar">
          <mat-icon class="search-icon">search</mat-icon>
          <input
            type="text"
            [(ngModel)]="searchTerm"
            (input)="onSearch()"
            placeholder="Rechercher">
        </div>
      </div>

      <!-- Loading spinner -->
      <div *ngIf="isLoading" class="loading-spinner">
        <mat-spinner diameter="50"></mat-spinner>
        <p>Chargement des utilisateurs...</p>
      </div>

      <!-- Tableau des utilisateurs -->
      <div class="users-table-container" *ngIf="!isLoading">
        <table class="users-table">
          <!-- En-tête du tableau -->
          <thead>
            <tr>
              <th class="col-nom">Nom</th>
              <th class="col-prenom">Prenom</th>
              <th class="col-email">E-mail</th>
              <th class="col-actif">Actif</th>
              <th class="col-actions"></th>
            </tr>
          </thead>

          <!-- Corps du tableau -->
          <tbody>
            <tr *ngFor="let user of filteredUtilisateurs" class="table-row">
              <td class="col-nom">
                <mat-icon class="user-icon">person</mat-icon>
                {{ user.nom }}
              </td>
              <td class="col-prenom">{{ user.prenom }}</td>
              <td class="col-email">{{ user.email }}</td>
              <td class="col-actif">
                <span class="status-badge">X</span>
              </td>
              <td class="col-actions">
                <button
                  class="action-button edit"
                  (click)="editUtilisateur(user.id!)"
                  title="Modifier">
                  <mat-icon>edit</mat-icon>
                </button>
                <button
                  class="action-button delete"
                  (click)="deleteUtilisateur(user)"
                  title="Supprimer">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </tr>

            <!-- Message si aucun utilisateur -->
            <tr *ngIf="filteredUtilisateurs.length === 0">
              <td colspan="5" class="no-data">
                <p>Aucun utilisateur trouvé</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>
</div>
